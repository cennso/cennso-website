name: Accessibility Scanner
on:
  schedule:
    # Run weekly on Mondays at 9:00 AM UTC
    - cron: '0 9 * * 1'
  workflow_dispatch:  # Allow manual trigger

jobs:
  accessibility_scanner:
    name: Scan for accessibility issues
    runs-on: ubuntu-latest
    permissions:
      contents: write  # Need write to push gh-cache branch
      issues: write
    steps:
      - name: Run accessibility scanner
        uses: github/accessibility-scanner@dab8a8a3e066babb83677cd31fdc393c3580163e
        with:
          urls: |
            https://cennso.com
            https://cennso.com/success-stories
            https://cennso.com/contact
            https://cennso.com/about
            https://cennso.com/blog
            https://cennso.com/solutions
          repository: cennso/cennso-website
          token: ${{ secrets.GITHUB_TOKEN }}
          cache_key: cached_results-cennso-main.json
          skip_copilot_assignment: true  # Set to false to enable GitHub Copilot auto-fix
